

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sub-Orbital Flight &mdash; kRPC 0.3.3 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
    <link rel="top" title="kRPC 0.3.3 documentation" href="../index.html"/>
        <link rel="up" title="Tutorials and Examples" href="../tutorials.html"/>
        <link rel="next" title="Reference Frames" href="reference-frames.html"/>
        <link rel="prev" title="Tutorials and Examples" href="../tutorials.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> kRPC
          

          
          </a>

          
            
            
              <div class="version">
                0.3.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorials.html">Tutorials and Examples</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Sub-Orbital Flight</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#part-one-preparing-for-launch">Part One: Preparing for Launch</a></li>
<li class="toctree-l3"><a class="reference internal" href="#part-two-lift-off">Part Two: Lift-off!</a></li>
<li class="toctree-l3"><a class="reference internal" href="#part-three-reaching-apoapsis">Part Three: Reaching Apoapsis</a></li>
<li class="toctree-l3"><a class="reference internal" href="#part-four-returning-safely-to-kerbin">Part Four: Returning Safely to Kerbin</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-frames.html">Reference Frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="launch-into-orbit.html">Launch into Orbit</a></li>
<li class="toctree-l2"><a class="reference internal" href="pitch-heading-roll.html">Pitch, Heading and Roll</a></li>
<li class="toctree-l2"><a class="reference internal" href="parts.html">Interacting with Parts</a></li>
<li class="toctree-l2"><a class="reference internal" href="docking-guidance.html">Docking Guidance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../csharp.html">C#</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp.html">C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java.html">Java</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lua.html">Lua</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../third-party.html">Other Clients, Services and Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compiling.html">Compiling kRPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending.html">Extending kRPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../communication-protocol.html">Communication Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../internals.html">Internals of kRPC</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">kRPC</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../tutorials.html">Tutorials and Examples</a> &raquo;</li>
      
    <li>Sub-Orbital Flight</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/tutorials/suborbital-flight.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sub-orbital-flight">
<h1>Sub-Orbital Flight<a class="headerlink" href="#sub-orbital-flight" title="Permalink to this headline">¶</a></h1>
<p>This introductory tutorial uses kRPC to send some Kerbals on a sub-orbital
flight, and (hopefully) returns them safely back to Kerbin. It covers the
following topics:</p>
<ul class="simple">
<li>Controlling a rocket (activating stages, setting the throttle)</li>
<li>Using the auto pilot to point the vessel in a specific direction</li>
<li>Tracking the amount of resources in the vessel</li>
<li>Tracking flight and orbital data (such as altitude and apoapsis altitude)</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For details on how to write scripts and connect to kRPC, see the
<a class="reference internal" href="../getting-started.html#getting-started"><span>Getting Started</span></a> guide.</p>
</div>
<div class="section" id="part-one-preparing-for-launch">
<h2>Part One: Preparing for Launch<a class="headerlink" href="#part-one-preparing-for-launch" title="Permalink to this headline">¶</a></h2>
<p>This tutorial uses the two stage rocket pictured below. The craft file for this
rocket can be <a class="reference download internal" href="../_downloads/SubOrbitalFlight.craft"><code class="xref download docutils literal"><span class="pre">downloaded</span> <span class="pre">here</span></code></a> and
the entire python script for this tutorial <a class="reference download internal" href="../_downloads/SubOrbitalFlight.py"><code class="xref download docutils literal"><span class="pre">from</span> <span class="pre">here</span></code></a></p>
<img alt="../_images/SubOrbitalFlight.png" class="align-center" src="../_images/SubOrbitalFlight.png" />
<p>The first thing we need to do is load the python client module and open a
connection to the server. We can also pass a descriptive name for our script
that will appear in the server window in game:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">krpc</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">krpc</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Sub-orbital flight script&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Next we need to get an object representing the active vessel. It&#8217;s via this
object that we will send instructions to the rocket:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">vessel</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">space_center</span><span class="o">.</span><span class="n">active_vessel</span>
</pre></div>
</div>
<p>We then need to prepare the rocket for launch. The following code sets the
throttle to maximum and instructs the auto-pilot to hold a pitch and heading of
90° (vertically upwards). It then waits for 1 second for these settings to take
effect.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">vessel</span><span class="o">.</span><span class="n">auto_pilot</span><span class="o">.</span><span class="n">target_pitch_and_heading</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span><span class="mi">90</span><span class="p">)</span>
<span class="n">vessel</span><span class="o">.</span><span class="n">auto_pilot</span><span class="o">.</span><span class="n">engage</span><span class="p">()</span>
<span class="n">vessel</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">throttle</span> <span class="o">=</span> <span class="mi">1</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="part-two-lift-off">
<h2>Part Two: Lift-off!<a class="headerlink" href="#part-two-lift-off" title="Permalink to this headline">¶</a></h2>
<p>We&#8217;re now ready to launch by activating the first stage (equivalent to pressing
the space bar):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;Launch!&#39;</span><span class="p">)</span>
<span class="n">vessel</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">activate_next_stage</span><span class="p">()</span>
</pre></div>
</div>
<p>The rocket has a solid fuel stage that will quickly run out, and will need to be
jettisoned. We can monitor the amount of solid fuel in the rocket using a while
loop that repeatedly checks how much solid fuel there is left in the
rocket. When the loop exits, we will activate the next stage to jettison the
boosters:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="n">vessel</span><span class="o">.</span><span class="n">resources</span><span class="o">.</span><span class="n">amount</span><span class="p">(</span><span class="s1">&#39;SolidFuel&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.1</span><span class="p">:</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Booster separation&#39;</span><span class="p">)</span>
<span class="n">vessel</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">activate_next_stage</span><span class="p">()</span>
</pre></div>
</div>
<p>In this bit of code, <code class="docutils literal"><span class="pre">vessel.resources</span></code> returns a <a class="reference internal" href="../python/api/space-center/resources.html#SpaceCenter.Resources" title="SpaceCenter.Resources"><code class="xref py py-class docutils literal"><span class="pre">Resources</span></code></a> object
that is used to get information about the resources in the rocket.</p>
</div>
<div class="section" id="part-three-reaching-apoapsis">
<h2>Part Three: Reaching Apoapsis<a class="headerlink" href="#part-three-reaching-apoapsis" title="Permalink to this headline">¶</a></h2>
<p>Next we will execute a gravity turn when the rocket reaches a sufficiently high
altitude. The following loop repeatedly checks the altitude and exits when the
rocket reaches 10km:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="n">vessel</span><span class="o">.</span><span class="n">flight</span><span class="p">()</span><span class="o">.</span><span class="n">mean_altitude</span> <span class="o">&lt;</span> <span class="mi">10000</span><span class="p">:</span>
   <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>In this bit of code, calling <code class="docutils literal"><span class="pre">vessel.flight()</span></code> returns a <a class="reference internal" href="../python/api/space-center/flight.html#SpaceCenter.Flight" title="SpaceCenter.Flight"><code class="xref py py-class docutils literal"><span class="pre">Flight</span></code></a>
object that is used to get all sorts of information about the rocket, such as
the direction it is pointing in and its velocity.</p>
<p>Now we need to angle the rocket over to a pitch of 60° and maintain a heading of
90° (west). To do this, we simply reconfigure the auto-pilot:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;Gravity turn&#39;</span><span class="p">)</span>
<span class="n">vessel</span><span class="o">.</span><span class="n">auto_pilot</span><span class="o">.</span><span class="n">target_pitch_and_heading</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span><span class="mi">90</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we wait until the apoapsis reaches 100km, then reduce the throttle to zero,
jettison the launch stage and turn off the auto-pilot:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="n">vessel</span><span class="o">.</span><span class="n">orbit</span><span class="o">.</span><span class="n">apoapsis_altitude</span> <span class="o">&lt;</span> <span class="mi">100000</span><span class="p">:</span>
   <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Launch stage separation&#39;</span><span class="p">)</span>
<span class="n">vessel</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">throttle</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">vessel</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">activate_next_stage</span><span class="p">()</span>
<span class="n">vessel</span><span class="o">.</span><span class="n">auto_pilot</span><span class="o">.</span><span class="n">disengage</span><span class="p">()</span>
</pre></div>
</div>
<p>In this bit of code, <code class="docutils literal"><span class="pre">vessel.orbit</span></code> returns an <a class="reference internal" href="../python/api/space-center/orbit.html#SpaceCenter.Orbit" title="SpaceCenter.Orbit"><code class="xref py py-class docutils literal"><span class="pre">Orbit</span></code></a> object that
contains all the information about the orbit of the rocket.</p>
</div>
<div class="section" id="part-four-returning-safely-to-kerbin">
<h2>Part Four: Returning Safely to Kerbin<a class="headerlink" href="#part-four-returning-safely-to-kerbin" title="Permalink to this headline">¶</a></h2>
<p>Our Kerbals are now heading on a sub-orbital trajectory and are on a collision
course with the surface. All that remains to do is wait until they fall to 1km
altitude above the surface, and then deploy the parachutes. If you like, you can
use time acceleration to skip ahead to just before this happens - the script
will continue to work.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="n">vessel</span><span class="o">.</span><span class="n">flight</span><span class="p">()</span><span class="o">.</span><span class="n">surface_altitude</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="p">:</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">vessel</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">activate_next_stage</span><span class="p">()</span>
</pre></div>
</div>
<p>The parachutes should have now been deployed. The next bit of code will
repeatedly print out the altitude of the capsule until its speed reaches zero &#8211;
which will happen when it lands:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="n">vessel</span><span class="o">.</span><span class="n">flight</span><span class="p">(</span><span class="n">vessel</span><span class="o">.</span><span class="n">orbit</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">reference_frame</span><span class="p">)</span><span class="o">.</span><span class="n">vertical_speed</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Altitude = </span><span class="si">%.1f</span><span class="s1"> meters&#39;</span> <span class="o">%</span> <span class="n">vessel</span><span class="o">.</span><span class="n">flight</span><span class="p">()</span><span class="o">.</span><span class="n">surface_altitude</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Landed!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This bit of code uses the <code class="docutils literal"><span class="pre">vessel.flight()</span></code> function, as before, but this time
it is passed a <a class="reference internal" href="../python/api/space-center/reference-frame.html#SpaceCenter.ReferenceFrame" title="SpaceCenter.ReferenceFrame"><code class="xref py py-class docutils literal"><span class="pre">ReferenceFrame</span></code></a> parameter. We want to get the vertical
speed of the capsule relative to the surface of Kerbin, so the values returned
by the flight object need to be relative to the surface of Kerbin. We therefore
pass <code class="docutils literal"><span class="pre">vessel.orbit.body.reference_frame</span></code> to <code class="docutils literal"><span class="pre">vessel.flight()</span></code> as this
reference frame has its origin at the center of Kerbin and it rotates with the
planet. For more information, check out the tutorial on
<a class="reference internal" href="reference-frames.html#tutorial-reference-frames"><span>Reference Frames</span></a>.</p>
<p>Your Kerbals should now have safely landed back on the surface.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="reference-frames.html" class="btn btn-neutral float-right" title="Reference Frames" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../tutorials.html" class="btn btn-neutral" title="Tutorials and Examples" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2016, djungelorm.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.3.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-61341323-1', 'auto');
  ga('send', 'pageview');
</script>


</body>
</html>